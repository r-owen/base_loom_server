<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Installing - Base Loom Server</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/mkapi-common.css" rel="stylesheet" />
        <link href="../css/mkapi-material.css" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Installing";
        var mkdocs_page_input_path = "installing.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
 <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Base Loom Server
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../weaving/">Weaving</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../threading/">Threading</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../settings/">Settings</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Installing</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#installing-a-loom-server">Installing a Loom Server</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#running-a-loom-server">Running a Loom Server</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#command-line-options">Command Line Options</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#upgrading-software">Upgrading Software</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../coding/">Coding</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../translations/">Translations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../version_history/">Version History</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >base_loom_server</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/">base_loom_server</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/app_runner/">base_loom_server.app_runner</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/base_loom_server/">base_loom_server.base_loom_server</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/base_loom_server%20with%20allow_reconnection/">Base loom server with allow reconnection</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/base_mock_loom/">base_loom_server.base_mock_loom</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/check_translation_files/">base_loom_server.check_translation_files</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/client_replies/">base_loom_server.client_replies</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/constants/">base_loom_server.constants</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/enums/">base_loom_server.enums</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/example_loom_server/">base_loom_server.example_loom_server</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/example_mock_loom/">base_loom_server.example_mock_loom</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/main/">base_loom_server.main</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/mock_streams/">base_loom_server.mock_streams</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/pattern_database/">base_loom_server.pattern_database</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/reduced_pattern/">base_loom_server.reduced_pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/rename_crowdin_files/">base_loom_server.rename_crowdin_files</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/testutils/">base_loom_server.testutils</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/translations/">base_loom_server.translations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/utils/">base_loom_server.utils</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/base_loom_server/version/">base_loom_server.version</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Base Loom Server</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Installing</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="installing">Installing</h1>
<p>This page gives instructions for installing a loom server such as
such as <a href="https://pypi.org/project/seguin-loom-server/">seguin_loom_server</a>
or <a href="https://pypi.org/project/toika-loom-server/">toika_loom_server</a>
that is based on <a href="https://pypi.org/project/base-loom-server/">base_loom_server</a>.</p>
<p>See <a href="../coding/">Coding</a> if you want to work on <a href="https://pypi.org/project/base-loom-server/">base_loom_server</a> or use it to develop a new loom driver.</p>
<h2 id="installing-a-loom-server">Installing a Loom Server</h2>
<ol>
<li>
<p>Pick your Computer</p>
<p>Decide which computer you will use to run the loom server.
Any macOS, Windows, or linux computer will work, and a laptop is a fine choice,
especially as you can run your web browser on the same machine that runs the server.</p>
<p>The software uses minimal resources, so an old, slow computer is fine.
A Raspberry Pi (I suggest model 4 or better) will work, but will be a bit slow when uploading patterns.
A used Mac Mini is a great choice if you have a spare keyboard and monitor to get it set up.</p>
</li>
<li>
<p>Install <a href="https://www.python.org/downloads/">Python</a> 3.11 or later.</p>
<p>The link has installers for common operating systems.</p>
<p>If you have a Raspberry Pi and the version of Python is too old,
try <code>sudo apt update</code> followed by <code>sodu apt upgrade python3</code>.
If that doesn't work, you may need to build Python from source
or install a newer version of the Raspberry Pi operating system.</p>
<p>If you are a Python programmer and know what a virtual environment is,
I suggest you set up a virtual environment for the loom server.
Otherwise don't bother.</p>
</li>
<li>
<p>Determine your computer's host name. In a terminal run:</p>
<pre><code>hostname
</code></pre>
</li>
<li>
<p>Determine the name of the port that your computer is using to connect to the loom.</p>
<p>The first step is to make sure the loom is <strong>not</strong> connected (unplug the USB cable or turn off the loom).
The next step depends on the operating system:</p>
<p>On macOS or linux:</p>
<ul>
<li>
<p>Run this terminal command to see which USB ports are already in use, if any:</p>
<pre><code>ls /dev | grep -i "tty.*usb.*"
</code></pre>
</li>
<li>
<p>Connect your computer to the loom with a USB cable, turn on the loom, and wait a few seconds to let it connect.</p>
</li>
<li>
<p>Run the same command again. There should be one new entry, which is the name of the port connected to the loom.
  If not, wait a bit longer and try again.</p>
</li>
</ul>
<p>On Windows this may work:</p>
<ul>
<li>
<p>Open "Device Manager"</p>
</li>
<li>
<p>Expand the "Universal Serial Bus controllers" section.</p>
</li>
<li>
<p>Connect your computer to the loom with a USB cable, turn on the loom, and wait a few seconds to let it connect.</p>
</li>
<li>
<p>Check for the new connection by clicking "Action" &gt; "Scan for hardware changes".</p>
</li>
</ul>
</li>
<li>
<p>Install the loom server software.</p>
<p>From here on I will assume you are installing <a href="https://pypi.org/project/toika-loom-server/">toika_loom_server</a>.
For <a href="https://pypi.org/project/seguin-loom-server/">seguin_loom_server</a> replace "toika" with "seguin".</p>
<p>On Raspberry Pi, it is convenient to install with <code>sudo</code> to avoid having to hunt for the loom server executable in <code>~/.local/bin</code>:</p>
<pre><code>sudo python -m pip install toika_loom_server
</code></pre>
<p>On other operating systems you can probably skip <code>sudo</code>, and Windows does not support <code>sudo</code>:</p>
<pre><code>python -m pip install toika_loom_server
</code></pre>
<p>In either case, watch pip's output. Near the end it should tell you where it installed <code>run_toika_loom</code>.</p>
</li>
<li>
<p>Learn about the <a href="#command-line-options">command-line options</a> available.</p>
<p>Use the options that seem useful on the run commands below.</p>
</li>
<li>
<p>Find the installed loom server executable:</p>
<ul>
<li>
<p>On macOS, Raspberry Pi (if you installed with <code>sudo</code>) and most unix you can probably run the executable directly:</p>
<pre><code>run_toika_loom &lt;num_shafts&gt; mock
</code></pre>
<p>where <num_shafts> is the number of shafts you wish the mock loom to have.
If that does not work, look at pip's output to see where it was installed.</p>
</li>
<li>
<p>On Raspberry Pi if you did not install with <code>sudo</code> then it is probably here (if not, look at pip's output):</p>
<pre><code>~/.local/bin/run_toika_loom &lt;num_shafts&gt; mock
</code></pre>
</li>
<li>
<p>On Windows the executable will probably be buried in the Scripts subdirectory of your python installation.
    Again, pip's output should tell you where.</p>
</li>
</ul>
<p>If the path to the executable is long or hard to remember, consider adding the directory containing the executable
to your "PATH", or in the case of macOS or unix, making an alias (a short word that will run the command).
On macOS and unix you do this by editing a shell configuration file, which you can read about online.
Here are <a href="https://stackoverflow.com/q/44272416/1653413">instructions for Windows 10</a>.</p>
</li>
<li>
<p>Test the loom server with the <code>mock</code> port:</p>
<p>Once you have found and started the server, as above, make sure you can connect to it.
Point your web browser to <code>https://hostname.local/8000</code> where <code>hostname</code> is the host name you determined above
(if the hostname ends with ".local", <em>don't</em> duplicate that).</p>
<p>Try a few things:</p>
<ul>
<li>
<p>Load one or a few weaving pattern files (which will still be there when you run with the real loom).</p>
</li>
<li>
<p>When using the mock loom there are extra debug controls shown at the bottom of the page.
  One of those is a button that lets you advance to the next pick. Try that.
  Try changing weave direction. Try the threading panel.</p>
</li>
<li>
<p>If you plan to weave any of the patterns you uploaded, go to the beginning before you disconnect,
  because the pattern database remembers where you left off weaving and threading.</p>
</li>
</ul>
</li>
</ol>
<h2 id="running-a-loom-server">Running a Loom Server</h2>
<p>Once you know how to run the loom server, run it with the real USB port for your loom.
Be sure to include the <a href="#command-line-options">command line options</a> you wish to use,
even though they are not shown here.</p>
<p>On macOS or unix:</p>
<pre><code>run_toika_loom &lt;num_shafts&gt; &lt;usb_port_name&gt;
</code></pre>
<p>or, if it is not on the PATH:</p>
<pre><code>&lt;path-to-executable&gt;/run_toika_loom &lt;num_shafts&gt; &lt;usb_port_name&gt;
</code></pre>
<p>On Windows:</p>
<pre><code>run_toika_loom.exe &lt;num_shafts&gt; &lt;usb_port_name&gt;
</code></pre>
<p>or, if it is not on the PATH:</p>
<pre><code>&lt;path-to-executable&gt;/run_toika_loom.exe &lt;num_shafts&gt; &lt;usb_port_name&gt;
</code></pre>
<p><num_shafts> is the number of shafts your loom has. This is used in two ways:</p>
<ul>
<li>Pattern files that have too many shafts are rejected.</li>
<li>The data format used by Toika ES dobby heads varies depending on the number of shafts.
    If you specify the wrong value, the loom will not work correctly.</li>
</ul>
<h2 id="command-line-options">Command Line Options</h2>
<p>The run_x_loom commands (e.g. run_toika_loom) accept various command line options.</p>
<p>To run more than one loom server on the same computer,
specify loom-specific values for each of the following options:</p>
<ul>
<li>
<p><code>--db-path</code>: path of the pattern database</p>
</li>
<li>
<p><code>--port</code>: web server port</p>
</li>
</ul>
<p>Another option of note:</p>
<ul>
<li><code>--reset-db</code>: clear all save weaving patterns.
   Use this when you want to clear all patterns or think the database might be corrupted.</li>
</ul>
<p>For a full list run the command with <code>-h</code> or <code>--help</code>.</p>
<h2 id="upgrading-software">Upgrading Software</h2>
<p>Use pip to upgrade your software. For example:</p>
<pre><code>    python -m pip install --upgrade dtx_to_wif base_loom_server toika_loom_server
</code></pre>
<p>On Toika's built-in web server you will almost certainly have to include the scary-looking <code>--break-system-packages</code> argument. Don't worry; it is safe in this context:</p>
<pre><code>    python -m pip install --upgrade dtx_to_wif base_loom_server toika_loom_server --break-system-packages
</code></pre>
<p>See pip's documentation for more information, including how to specify specific versions of packages.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../settings/" class="btn btn-neutral float-left" title="Settings"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../coding/" class="btn btn-neutral float-right" title="Coding">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../settings/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../coding/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../javascript/mkapi.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
</script></body>
</html>
